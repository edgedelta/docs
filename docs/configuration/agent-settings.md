---
description: >-
  This document outlines the agent level parameters that can be defined as part
  of the Edge Delta agent's configuration file.
---

# Agent Settings

## Overview

You can use this document to learn about the configuration parameters available in a configuration file, specifically for **Agent Settings**.

At a high level, there are 2 ways to manage **Agent Settings**:

  * If you need to create a new configuration, then you can use the visual editor to populate a YAML file, as well as make changes directly in the YAML file.
  * If you already have an existing configuration, then you can update the configuration in the YAML file. 

> **Note**
> 
> While all parameters can be updated in the YAML file, most **Agent Settings** parameters are available in the visual editor. 

***

## Access Parameters

**To access the visual editor for a new configuration:** 

1. In the Edge Delta Admin portal, on the left-side navigation, click **Agent Settings**.
2. Click **Create Configuration**.
3. Click **Visual**.
4. On the right-side, select **Agent Settings**. 
5. Review the list of options. 

**To access the YAML file for an existing configuration:** 

1. In the Edge Delta Admin portal, on the left-side navigation, click **Agent Settings**.
2. Locate the desired configuration, and then under **Actions**, click the corresponding edit icon.
3. Review the YAML file.

***

## Review Parameters

| Key | Description | Default Value | Required? | Available in Visual Editor? |
|---|---|---|---|---|
| Anomaly Capture Size (anomaly_capture_size) | This key represents the number of log lines (buffer size) to capture during an anomaly capture. | 125 | No | Yes |
| Anomaly Coefficient (anomaly_coefficient) | This key represents the anomaly coefficient used to multiply the final score to a range of 0 - 100. <br><br>The higher the coefficient, the higher the anomaly score will be. <br><br>For some rules types, this key can be set at the rule level. | 10 | No | Yes |
| Anomaly Confidence Period (anomaly_confidence_period) | After a source is found, anomaly scores will not be calculated for the first-given period. <br><br>For some rules types, this key can be set at the rule level. | 30M | No | Yes |
| Anomaly Tolerance (anomaly_tolerance) | When it is non-zero, anomaly scores handle edge cases better when standard deviation is too small. <br><br>For some rules types, this key can be set at the rule level. | 0.01 | No | Yes |
| Archive (archive_destination) | This key allows an existing integration to stream logs to an endpoint. <br><br>For example, if enabled, the AWS S3 integration will stream logs to an AWS S3 endpoint. <br><br>To learn more, see [Outputs](outputs.md). |  |  | Yes |
| Attributes | This key defines a user-defined, key-value pair that is used to label and distinguish different running agents. <br><br>These key-value pairs are attached to the data that is collected and generated by the agent and sent to streaming destinations. <br><br>You can set keywords for app, environment, and region. |  |  | Yes |
| Capture Flush Mode (capture_flush_mode) | This key sets the behavior for flushing captured contextual log buffers. <br><br>This key supports the following modes:<br><br>local_per_source flushes the captured buffer of a source when a local alert is triggered from the same source. <br><br>local_all flushes all captured buffers when a local alert is triggered, not necessarily from the same source. As a result, when an alert is triggered from an agent, all captured buffers from all active sources will be flushed. <br><br>tag_per_source flushes the captured buffer of a source when an alert is triggered from the same source and tag, including any agent within the current tag. <br><br>tag_all flushes all captured buffers for all agents within the same tag when any agent triggers an alert. | local_per_source | No | Yes |
| Log (log) | This key contains additional subfields to configure an agent's log settings. <br><br>When an agent runs inside a container, such as Kubernetes, the agent logs to standard output. <br><br>When an agent runs as a Linux, Windows, or MacOS service, the agent logs to a file named edgedelta.log next to the installed service location. | Not applicable | No | Yes |
| Multiline Byte Size | This key configures the buffer byte size for multiline accumulation. |  |  | Yes |
| Multiline Count | This key configures the buffer length for multiline accumulation. |  |  | Yes |
| Report Only Non-Zero Stats (only_report_nonzeros) | This key configures if non-zero stats should be reported or not. <br><br>For some rules types, this key can be set at the rule level. | False | No | Yes |
| Skip Empty Intervals (skip_empty_intervals) | This key configures if empty intervals should be skipped so that anomaly scores are calculated based on non-zero intervals. <br><br>For some rules types, this key can be set at the rule level. | False | No | Yes |
| Soft CPU Limit (soft_cpu_limit) | This key allows you to use more CPU than what is specified in the allocation. <br><br>It is only honored by clustering processor at the moment. 0.5 means 50% of a core. <br><br>To enable, in the clustering rule, set cpu_friendly=true. | 0.0 | No | Yes |
| Tag (tag) | This key is a user-defined tag used to describe the environment, such as prod_us_west_2_cluster. <br><br>While the default value is Edge, Edge Delta recommends that you set a value. | Edge | No | Yes |


***

## Review YAML Example

```yaml
agent_settings:
  tag: prod_payments
  log:
    level: info
  persisting_cursor_settings:
    path: /var/lib/edgedelta/cursor_provider
    file_name: cursor_provider.json
    flush_interval: 5s
  soft_cpu_limit: 0.5
  anomaly_tolerance: 0.1
  anomaly_confidence_period: 1m
  skip_empty_intervals: false
  only_report_nonzeros: false
  anomaly_capture_size: 1000
  anomaly_capture_bytesize: "10 KB"
  anomaly_capture_duration: 1m
  anomaly_coefficient: 10.0
  grace_period: 30s
```

***
